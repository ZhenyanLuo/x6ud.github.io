import{L as S,R as V,N as R}from"./NormalizedLandmarksCanvas.bd1866de.js";import{P as L,a as D}from"./PhotoDatabase.116a3c6d.js";import{d as O,o as b,c as $,a,v as j,m as I,J as B,y as G,g as m,h as T,i as F,r as d,k as N,l as o,w as t,t as v,F as H,D as U,s as J,O as q,P as A,Q as E,n as Q,u as g}from"./vendor.c4a19e19.js";import{_ as K}from"./index.b762845a.js";const W={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},X=a("path",{d:"M893.3 293.3L730.7 130.7c-7.5-7.5-16.7-13-26.7-16V112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V338.5c0-17-6.7-33.2-18.7-45.2zM384 184h256v104H384V184zm456 656H184V184h136v136c0 17.7 14.3 32 32 32h320c17.7 0 32-14.3 32-32V205.8l136 136V840zM512 442c-79.5 0-144 64.5-144 144s64.5 144 144 144s144-64.5 144-144s-64.5-144-144-144zm0 224c-44.2 0-80-35.8-80-80s35.8-80 80-80s80 35.8 80 80s-35.8 80-80 80z",fill:"currentColor"},null,-1);var Y=O({name:"SaveOutlined",render:function(n,r){return b(),$("svg",W,[X])}}),Z=O({components:{SaveOutlined:Y,LeftOutlined:S,RightOutlined:V,NButton:j,NIcon:I,NInput:B,NRadio:G,NormalizedLandmarksCanvas:R},setup(){let e=new L;const n=m(!1),r=m(0),y=m([]),l=m(1),C=m(20),i=T(function(){return Math.ceil(r.value/C.value)}),u=m(new D);F(async function(){try{n.value=!0,await e.init(),r.value=e.countRecords(),c()}finally{n.value=!1}});async function P(){try{e=new L,await e.init(!1),e.createTables(),r.value=e.countRecords()}finally{n.value=!1}}async function f(){try{await e.saveToFile()}finally{n.value=!1}}function c(){y.value=e.queryPhotosPage(C.value,l.value)}function w(){l.value=Math.max(l.value-1,1),c()}function k(){l.value=Math.min(l.value+1,i.value),c()}function p(){const h=Number(prompt("Jump to page",l.value+""));!h||(l.value=Math.max(Math.min(Number(h),i.value),1)||1,c())}function s(h){u.value=h}function z(h){const M=Number(h.target.value);e.updatePhotoGender(u.value.id,M),u.value.gender=M}return{dbLoading:n,numOfRecords:r,page:y,pageNum:l,numOfPages:i,photo:u,recreate:P,save:f,prevPage:w,nextPage:k,jumpToPage:p,selectPhoto:s,onPhotoGenderChange:z}}});const _=e=>(q("data-v-4249c706"),e=e(),A(),e),x={class:"container rows"},ee={class:"cols",style:{"align-items":"center","font-size":"12px",color:"#999"}},oe=g(" Recreate "),ae=_(()=>o("div",{class:"fill"},null,-1)),ne={style:{"margin-right":".5em"}},se=g(" Save "),te={class:"cols",style:{height:"56px"}},le={class:"photos cols fill"},ie=["onClick"],de={class:"cols fill"},re={class:"rows",style:{width:"280px",overflow:"auto"}},ue={class:"form"},ce={class:"form-item"},he=_(()=>o("label",null,"ID",-1)),me={class:"form-item"},pe=_(()=>o("label",null,"Author",-1)),ve={class:"form-item"},ge=_(()=>o("label",null,"Size",-1)),_e={class:"value"},fe={class:"form-item"},ke=_(()=>o("label",null,"Gender",-1)),be={class:"value"},ye=g(" Unmarked "),Ce=g(" Male "),Pe=g(" Female ");function we(e,n,r,y,l,C){const i=d("n-button"),u=d("save-outlined"),P=d("left-outlined"),f=d("n-icon"),c=d("right-outlined"),w=d("normalized-landmarks-canvas"),k=d("n-input"),p=d("n-radio");return b(),N("div",x,[o("div",ee,[a(i,{size:"small",loading:e.dbLoading,onClick:e.recreate},{default:t(()=>[oe]),_:1},8,["loading","onClick"]),ae,o("div",ne,"Num of Records: "+v(e.numOfRecords),1),a(i,{size:"small",loading:e.dbLoading,type:"primary",onClick:e.save},{icon:t(()=>[a(u)]),default:t(()=>[se]),_:1},8,["loading","onClick"])]),o("div",te,[a(i,{title:"Prev Page",style:{height:"100%"},size:"tiny",disabled:!e.page||e.pageNum===1,onClick:e.prevPage},{icon:t(()=>[a(f,null,{default:t(()=>[a(P)]),_:1})]),_:1},8,["disabled","onClick"]),o("div",le,[e.page?(b(!0),N(H,{key:0},U(e.page,s=>(b(),N("div",{class:E(["photo",{selected:s.id===e.photo.id}]),style:Q({"background-image":`url(${s.regular})`}),onClick:z=>e.selectPhoto(s)},null,14,ie))),256)):J("",!0),o("div",{class:"pages",onDblclick:n[0]||(n[0]=(...s)=>e.jumpToPage&&e.jumpToPage(...s))},v(e.pageNum)+"/"+v(e.numOfPages),33)]),a(i,{title:"Next Page",style:{height:"100%"},size:"tiny",disabled:!e.page||e.pageNum>=e.numOfPages,onClick:e.nextPage},{icon:t(()=>[a(f,null,{default:t(()=>[a(c)]),_:1})]),_:1},8,["disabled","onClick"])]),o("div",de,[a(w,{class:"fill","img-url":e.photo.regular,landmarks:e.photo.normalizedLandmarks},null,8,["img-url","landmarks"]),o("div",re,[o("div",ue,[o("div",ce,[he,a(k,{class:"value",placeholder:"",size:"small",readonly:"",value:e.photo.id,"onUpdate:value":n[1]||(n[1]=s=>e.photo.id=s)},null,8,["value"])]),o("div",me,[pe,a(k,{class:"value",placeholder:"",size:"small",readonly:"",value:e.photo.authorName,"onUpdate:value":n[2]||(n[2]=s=>e.photo.authorName=s)},null,8,["value"])]),o("div",ve,[ge,o("div",_e,v(e.photo.width)+"\xD7"+v(e.photo.height),1)]),o("div",fe,[ke,o("div",be,[a(p,{name:"gender",checked:!e.photo.gender,value:0,disabled:!e.photo.id,onChange:e.onPhotoGenderChange},{default:t(()=>[ye]),_:1},8,["checked","disabled","onChange"]),a(p,{name:"gender",checked:e.photo.gender===1,value:1,disabled:!e.photo.id,onChange:e.onPhotoGenderChange},{default:t(()=>[Ce]),_:1},8,["checked","disabled","onChange"]),a(p,{name:"gender",checked:e.photo.gender===2,value:2,disabled:!e.photo.id,onChange:e.onPhotoGenderChange},{default:t(()=>[Pe]),_:1},8,["checked","disabled","onChange"])])])])])])])}var Oe=K(Z,[["render",we],["__scopeId","data-v-4249c706"]]);export{Oe as default};
//# sourceMappingURL=DbManager.e6ed0c49.js.map
