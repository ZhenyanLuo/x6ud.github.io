import{d as M,o as b,c as R,a as L,p as S,R as A,g as $,i as T,q as V,r as U,k as j,w as D,l as I}from"./vendor.c4a19e19.js";import{l as P,N as W}from"./PhotoDatabase.116a3c6d.js";import{_ as q}from"./index.f80f3610.js";const E={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},F=L("path",{d:"M724 218.3V141c0-6.7-7.7-10.4-12.9-6.3L260.3 486.8a31.86 31.86 0 0 0 0 50.3l450.8 352.1c5.3 4.1 12.9.4 12.9-6.3v-77.3c0-4.9-2.3-9.6-6.1-12.6l-360-281l360-281.1c3.8-3 6.1-7.7 6.1-12.6z",fill:"currentColor"},null,-1);var nt=M({name:"LeftOutlined",render:function(r,i){return b(),R("svg",E,[F])}});const H={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 1024 1024"},K=L("path",{d:"M765.7 486.8L314.9 134.7A7.97 7.97 0 0 0 302 141v77.3c0 4.9 2.3 9.6 6.1 12.6l360 281.1l-360 281.1c-3.9 3-6.1 7.7-6.1 12.6V883c0 6.7 7.7 10.4 12.9 6.3l450.8-352.1a31.96 31.96 0 0 0 0-50.4z",fill:"currentColor"},null,-1);var et=M({name:"RightOutlined",render:function(r,i){return b(),R("svg",H,[K])}}),G=M({components:{NSpin:S,NSwitch:A},props:{landmarks:Array,imgUrl:String},setup(n){const r=$(),i=$();let s,v=$(!1),e;const m=$(!0);T(async function(){s=i.value.getContext("2d"),await f()}),V([()=>n.landmarks,()=>n.imgUrl,m],f);async function f(){var B;const _=r.value.getBoundingClientRect(),d=_.width,h=_.height;if((i.value.width!==d||i.value.height!==h)&&(i.value.width=d,i.value.height=h),s.clearRect(0,0,d,h),n.imgUrl){if(!e||e.src!==n.imgUrl)try{v.value=!0,e=await P(n.imgUrl)}finally{v.value=!1}let u=1;e.width>d&&(u=d/e.width),e.height>h&&(u=Math.min(u,h/e.height));const z=d/2,O=h/2,k=e.width*u,p=e.height*u,N=z-k/2,C=O-p/2;if(s.drawImage(e,N,C,k,p),((B=n.landmarks)==null?void 0:B.length)===W&&m.value){let a=function(l){s.beginPath();const c=n.landmarks[l].point,w=c[0]*k+N,g=c[1]*p+C;s.moveTo(w,g),x+=1,y+=n.landmarks[l].visibility},t=function(l){const c=n.landmarks[l].point,w=c[0]*k+N,g=c[1]*p+C;s.lineTo(w,g),x+=1,y+=n.landmarks[l].visibility},o=function(){const l=y/x||0,c=Math.floor(255*l),w=0,g=Math.floor(255*(1-l));s.strokeStyle=`rgb(${c},${w},${g})`,s.stroke(),x=0,y=0};s.lineWidth=1.5;let x=0,y=0;a(8),t(6),t(5),t(4),t(0),t(1),t(2),t(3),t(7),o(),a(10),t(9),o(),a(12),t(24),t(23),t(11),t(12),o(),a(12),t(14),t(16),o(),a(11),t(13),t(15),o(),a(24),t(26),t(28),o(),a(23),t(25),t(27),o(),a(16),t(18),t(20),t(16),t(22),o(),a(15),t(17),t(19),t(15),t(21),o(),a(28),t(32),t(30),t(28),o(),a(27),t(29),t(31),t(27),o()}}}return{wrapper:r,canvas:i,imageLoading:v,drawLandmarks:m}}});const J={class:"normalized-landmarks-canvas",ref:"wrapper"},Q={ref:"canvas"};function X(n,r,i,s,v,e){const m=U("n-spin"),f=U("n-switch");return b(),j("div",J,[L(m,{show:n.imageLoading},{default:D(()=>[I("canvas",Q,null,512)]),_:1},8,["show"]),L(f,{value:n.drawLandmarks,"onUpdate:value":r[0]||(r[0]=_=>n.drawLandmarks=_),style:{position:"absolute",right:"4px",top:"4px","z-index":"2"}},null,8,["value"])],512)}var at=q(G,[["render",X]]);export{nt as L,at as N,et as R};
//# sourceMappingURL=NormalizedLandmarksCanvas.b7a4aaac.js.map
